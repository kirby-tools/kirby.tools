---
title: View Button & Section Configuration
description: Configure Copilot view buttons and sections in your blueprints with fine-grained control over AI generation behavior.
---

Kirby Copilot supports configuration through view buttons (in Kirby 5+) and sections, giving you fine-grained control over AI generation behavior. Both approaches support the same configuration options and can be used together.

## View Button Configuration

::note
View buttons are available in **Kirby 5+** only. For earlier versions, use the [Copilot section](#section-configuration) approach.
::

In Kirby 5, you can add the Copilot view button to any blueprint and configure its behavior with props:

::code-group

```yaml [site.yml]
buttons:
  copilot:
    label: AI Assistant
    userPrompt: Generate content based on the site structure and existing content
    theme: blue-icon
  preview: true
  languages: true
```

```yaml [pages/default.yml]
buttons:
  copilot:
    label: AI Assistant
    userPrompt: "Create engaging content for this page about {title}"
    theme: blue-icon
  preview: true
  settings: true
  languages: true
  status: true
```

```yaml [files/default.yml]
buttons:
  copilot:
    label: AI Assistant
    userPrompt: Analyze this file and suggest descriptive content
    theme: blue-icon
  preview: true
  settings: true
  languages: true
```

::

The view button opens a prompt dialog that allows you to generate content for multiple fields at once:

::preview{src="/img/kirby-copilot-view-button.png" alt="Copilot Panel view button"}
::

## Section Configuration

Add the Copilot section to any blueprint for field-specific AI generation:

::code-group

```yaml [Basic Section]
sections:
  copilot:
    type: copilot
    field: content
```

```yaml [Configured Section]
sections:
  copilot:
    type: copilot
    label: Content Generator
    field: blocks
    userPrompt: "Write a comprehensive article about {title} with multiple sections"
    theme: positive
    size: lg
    help: Use this to generate initial content drafts for your blocks field.
```

::

The section provides a dedicated interface for generating content for a specific field:

::preview{src="/img/copilot-section-pending.png" alt="Copilot section in pending state" width="1074" height="606"}
::

## Available Options

::tip
When [configured globally](/docs/copilot/configuration/global), these options will apply to both view buttons and sections. Local configurations can override them.
::

### `label` :u-badge{label="String" class="align-middle ml-2 !rounded-full" variant="subtle"}

Custom label for the view button or section. The default depends on the Panel language (e.g., "Copilot" for English).

::code-group

```yaml [View Button]
buttons:
  copilot:
    label: AI Assistant
```

```yaml [Section]
sections:
  copilot:
    type: copilot
    field: content
    label: Content Generator
```

::

### `userPrompt` :u-badge{label="String" class="align-middle ml-2 !rounded-full" variant="subtle"}

Default user prompt that appears when the generation dialog opens (view button) or when the section is rendered. Without a predefined prompt, the input field will be empty. Users can edit the prompt before generating content.

::code-group

```yaml [View Button]
buttons:
  copilot:
    userPrompt: Create engaging content for this page about {title}
```

```yaml [Section]
sections:
  copilot:
    type: copilot
    field: metaDescription
    userPrompt: |
      Generate a SEO meta description in 140 characters max for my article "{title}":
      {text}
```

::

::card{icon="i-ri-braces-line"}

With this configuration, the section will render as follows:

::preview{src="/img/copilot-predefined-user-prompt.png" alt="Copilot section with predefined user prompt" width="1074" height="594"}
::

Edits to the prompt in the section are stored to the local storage of the user's browser.

::tip
Check out the [`editable`](#editable) property to disable the editing of the user prompt.
::

**Kirby Query Language**<br>
In Copilot sections, you can use queries to set the user prompt dynamically. This is useful for dynamic prompts based on page's content.

```yaml
sections:
  copilot:
    userPrompt: "{{ page.customPrompt.value }}"
```

::

### `systemPrompt` :u-badge{label="String" class="align-middle ml-2 !rounded-full" variant="subtle"}

Custom system prompt that controls how the AI structures and formats the generated content. Users cannot see or edit this prompt.

Defaults to the [global `systemPrompt`](/docs/copilot/configuration/global#systemprompt) if not set locally in the view button or section.

::code-group

```yaml [View Button]
buttons:
  copilot:
    systemPrompt: You are a technical writer specializing in documentation. Use clear, concise language.
```

```yaml [Section]
sections:
  copilot:
    type: copilot
    field: content
    systemPrompt: You are an expert copywriter. Create engaging, conversion-focused content.
```

::

::callout{icon="i-ri-ai-generate" color="success" to="/docs/copilot/configuration/system-prompt"}
Learn more about the system prompt and how to customize it effectively.
::

::callout{icon="i-ri-braces-line" color="info"}
For Copilot sections, Kirby queries are supported just as in the `userPrompt` property.
::

### `logLevel` :u-badge{label="String" class="align-middle ml-2 !rounded-full" variant="subtle"}

Set the logging level for debugging AI generation. Inspect the browser console to see logs.

**Options:** `error`, `warn`, `info`, `debug`

::code-group

```yaml [View Button]
buttons:
  copilot:
    logLevel: info
```

```yaml [Section]
sections:
  copilot:
    type: copilot
    field: content
    logLevel: debug
```

::

### `theme` :u-badge{label="String" class="align-middle ml-2 !rounded-full" variant="subtle"}

Controls the visual appearance and color theme of the button or section.

**Default:** `notice-icon`
**Options:** `notice-icon`, `passive`, `white`, `info`, `positive`, `warning`, `notice`, `negative`, `*-icon` variants (e.g., `positive-icon`, `negative-icon`)

::code-group

```yaml [View Button]
buttons:
  copilot:
    theme: blue-icon
```

```yaml [Section]
sections:
  copilot:
    type: copilot
    field: content
    theme: blue-icon
```

::

## Section-Only Options

The following options are only available for sections (not view buttons):

### `field` :u-badge{label="String" class="align-middle ml-2 !rounded-full" variant="subtle"}

**Required for sections.** Specifies which field to generate content for. This should be the name of a field defined in the same blueprint.

```yaml [sections/copilot.yml]
type: copilot
field: blocks
```

### `editable` :u-badge{label="Boolean" class="align-middle ml-2 !rounded-full" variant="subtle"}

Control whether users can edit the prompt. Setting it to `false` is useful if a specific `userPrompt` should always be used without modifications.

::tip
Learn more about working with files on the dedicated [Files as Context](/docs/copilot/usage/files) page.
::

**Default:** `true`

```yaml [sections/copilot.yml]
type: copilot
field: content
userPrompt: Write a technical article about the topic "{title}"
editable: false
```

::preview{src="/img/copilot-section-immutable.png" alt="Copilot section with immutable user prompt" width="1074" height="192"}
::

### `files` :u-badge{label="Boolean | String" class="align-middle ml-2 !rounded-full" variant="subtle"}

Context is key to relevant AI-generated content. This option enables file attachments for providing context to the AI.

**Default:** `true`
**Options:** `true`, `false`, `"auto"`

To disable file attachments and prevent users from adding files, set the `files` property to `false`:

```yaml [sections/copilot.yml]
type: copilot
field: blocks
files: false
```

::preview{src="/img/copilot-section-config-files.png" alt="Copilot section with files configuration" width="1074" height="288"}
::

On a Kirby file page, setting `files: auto` pre-selects the **current file as context** for the user prompt. This is useful for generating metadata like alternative text or descriptions based on the image or PDF, that has already been uploaded to the Panel:

```yaml [sections/copilot.yml]
type: copilot
field: alt
# Use the uploaded file as context
files: auto
# Optional: Provide a pre-defined user prompt
userPrompt: Write an alternative text for the provided image. Use a maximum of 10 words.
# Optional: Disable the editing of the user prompt
editable: false
```

The section above will use the current file of a Kirby file model as context for the user prompt:

:prose-video{src="/vid/kirby-copilot-generate-image-alt.mp4" poster="/vid/kirby-copilot-generate-image-alt-poster.jpg" width="908" height="540"}

### `open` :u-badge{label="Boolean" class="align-middle ml-2 !rounded-full" variant="subtle"}

Set the initial state of the prompt input accordion in sections.

**Default:** `false` (closed)

### `storage` :u-badge{label="Boolean" class="align-middle ml-2 !rounded-full" variant="subtle"}

Enable or disable local storage for saving user prompts in the browser. When enabled, prompts are remembered between sessions.

**Default:** `true`

::code-group

```yaml [View Button]
buttons:
  copilot:
    storage: false
```

```yaml [Section]
sections:
  copilot:
    type: copilot
    field: content
    storage: false
```

### `size` :u-badge{label="String" class="align-middle ml-2 !rounded-full" variant="subtle"}

Controls the size of buttons (**Generate**, **Undo**, **Redo**) in the Copilot section interface.

**Default:** `md`
**Options:** `xs`, `sm`, `md`, `lg`

```yaml [sections/copilot.yml]
type: copilot
field: content
size: lg
```

### `help` :u-badge{label="String" class="align-middle ml-2 !rounded-full" variant="subtle"}

Provide additional help text or instructions for the Copilot section.

```yaml [sections/copilot.yml]
type: copilot
help: |
  Example: Write a summary of this page and include the contents of {blocks}.
```

## Configuration Precedence

Configuration options are applied in the following order (later options override earlier ones):

1. **Default values** (built into the plugin)
2. **Global configuration** (in `config.php`)
3. **View button & section props** (in blueprints)

::code-group

```php [Global Config]
// config.php
return [
    'johannschopplich.copilot' => [
        'systemPrompt' => 'Default system prompt', // Applied globally
        'theme' => 'positive'
    ]
];
```

```yaml [Blueprint Override]
sections:
  copilot:
    type: copilot
    field: content
    theme: blue-icon # Overrides global config
    # systemPrompt inherited from global config

buttons:
  copilot:
    theme: blue-icon # Overrides global config
```

::
